<script type="text/javascript">
    var disqus_config = function () {
        // The generated payload which authenticates users with Disqus
        this.page.remote_auth_s3 = {{ json(remote_auth_s3) }};
        this.page.api_key = {{ json(settings.DISQUS_PUBLIC_KEY) }};
    }
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = '{{ disqus_shortname }}';
    // The last fragment of the URL is the friendly name which can change, don't use that as part of the unique identifier.
    var disqus_url = {{ "'{}'".format(disqus_url)|safe if disqus_url else "window.location.href" }}.split('/').slice(0, -1).join('/');
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
