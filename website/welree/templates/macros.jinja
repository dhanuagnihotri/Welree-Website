{% macro tastypie_modal_form(name, endpoint, form, title, action) -%}
    <div class="modal fade modal-tastypie" id="modal-{{name}}">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">{{ title }}</h4>
          </div>
          <div class="modal-body">
            <form action="{{ endpoint }}" enctype="multipart/form-data">{% csrf_token%}
                {{ form|as_bootstrap() }}
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary">{{ action }}</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
{%- endmacro %}

{% macro thumb_row(items, collection, count=3) %}
    {% for item in items %}
        {% if item.primary_photo %}
            <a href="{{ item.get_absolute_collection_url(collection) }}">{{ sorlimgtag(item.primary_photo, "140x140", crop="center", classes="img-thumbnail") }}</a>
        {% endif %}
    {% endfor %}
    {% for i in range(3-items|length) %}
        <img src="" class="img-thumbnail">
    {% endfor %}
{% endmacro %}

{% macro slider(items) %}
<div id="slider1_container" style="position:relative;margin:0 auto;width:809px;height:150px;overflow:hidden;">
    <div u="loading" style="position:absolute;top:0px;left:0px;">
        <div style="filter:alpha(opacity=70);opacity:0.7;position:absolute;display:block;background-color:#000;top:0px;left:0px;width:100%;height:100%;">
        </div>
        <div style="position:absolute;display:block;background:url(http://www.jssor.com/img/loading.gif) no-repeat center center;top:0px;left:0px;width:100%;height:100%;">
        </div>
    </div>
    <div u="slides" style="cursor:move;position:absolute;left:0px;top:0px;width:809px;height:150px;overflow:hidden;">
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/005.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/006.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/011.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/013.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/014.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/019.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/020.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/021.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/022.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/024.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/025.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/027.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/029.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/030.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/031.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/032.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/034.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/038.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/039.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/043.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/044.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/047.jpg"></div>
        <div><img u="image" src="http://www.jssor.com/img/ancient-lady/050.jpg"></div>
    </div>
    <div u="navigator" class="jssorb03" style="bottom:4px;right:6px;">
        <div u="prototype"><div u="numbertemplate"></div></div>
    </div>
    <span u="arrowleft" class="jssora03l" style="top:123px;left:8px;">
    </span>
    <span u="arrowright" class="jssora03r" style="top:123px;right:8px;">
    </span>
    <a style="display:none" href="http://www.jssor.com">jQuery Slider</a>
</div>
{% endmacro %}

{% macro individual_carousel(jewelryitem, w=580, h=400) %}
<div>
    <div id="top-carousel" class="carousel slide">
      <ol class="carousel-indicators">
        {% for item in jewelryitems %}
            <li data-target="#top-carousel" data-slide-to="{{ loop.index0 }}" class="{{ "active" if loop.first else "" }}"></li>
        {% endfor %}
      </ol>
      <!-- Carousel items -->
      <div class="carousel-inner">
      {% for photo in [jewelryitem.primary_photo] %}
          <div class="item {{ "active" if loop.first else "" }}">
              {{ sorlimgtag(photo, "%sx%s"%(w,h), crop="center")|safe }}
          </div>
      {% endfor %}
      </div>
      <!-- Controls -->
      <a class="left carousel-control" href="#top-carousel" role="button" data-slide="prev">
        <div class="chevron chevron-left" aria-hidden="true"></div>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#top-carousel" role="button" data-slide="next">
        <div class="chevron chevron-right" aria-hidden="true"></div>
        <span class="sr-only">Next</span>
      </a>
      <div class="carousel-actions">
        <a href="#" class="action-heart"><img src="/static/img/action-heart.png"></a>
        <a href="#" class="action-add" data-item-id="{{ jewelryitem.id }}"><img src="/static/img/action-add.png"></a>
      </div>
    </div>
</div>
{% endmacro %}
{% macro home_carousel(jewelryitems, w=1024, h=600) %}
<div>
    <div id="top-carousel" class="carousel slide" style="max-width:1024px;min-height:100px;margin:auto;">
      <!-- Carousel items -->
      <div class="carousel-inner">
      {% for item in jewelryitems %}
          {% set collection = item.collections.first() %}
          {% set url = item.get_absolute_collection_url(collection) %}
          <div class="item {{ "active" if loop.first else "" }}" data-item-id="{{ item.id }}" data-item-url="{{ url }}">
              <div class="carousel-footer"></div>
              <a href="{{ url }}">
                  {{ sorlimgtag(item.primary_photo, "%sx%s"%(w,h), crop="center") }}
              </a>
              <a href="{{ url }}">
                  <div class="carousel-caption">
                    <h4>{{ item.description|truncatechars(80) }}</h4>
                  </div>
                  <div class="carousel-designer font-special">{{ collection.owner.full_name }}</div>
              </a>
          </div>
      {% endfor %}
      </div>
      <!-- Controls -->
      <a class="left carousel-control" href="#top-carousel" role="button" data-slide="prev">
        <div class="chevron chevron-left" aria-hidden="true"></div>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#top-carousel" role="button" data-slide="next">
        <div class="chevron chevron-right" aria-hidden="true"></div>
        <span class="sr-only">Next</span>
      </a>
      <div class="carousel-actions">
        <a href="#" class="action-heart"><img src="/static/img/action-heart.png"></a>
        <a href="#" class="action-add"><img src="/static/img/action-add.png"></a>
        <a href="#" class="action-info"><img src="/static/img/action-info.png"></a>
      </div>
    </div>
</div>
{% endmacro %}
{% macro collection_primary(collection) %}
    <div class="collection-primary">
        <div class="inner">
            <div class="gradient"></div>
            <img class="collection-border collection-border-left" src="/static/img/collection-bg-left.png">
            <img class="collection-border collection-border-right" src="/static/img/collection-bg-right.png">
            {{ sorlimgtag(collection.annotated_photos[0], "512x100", crop="center", classes="collection") }}
            <p class="collection-name">{{ collection.name }}</p>
            <p class="collection-owner font-special">{{ collection.owner.full_name }}</p>
        </div>
    </div>
  {% endmacro %}
  {% macro collection_rows(collections) %}
    {% for collection in collections %}
        <a href="{{ collection.get_absolute_url() }}">
        <div class="featured-collection clearfix">
            {% if loop.index is odd %}{{ collection_primary(collection) }}{% endif %}
            <div class="secondary"><div class="inner">
                {% if collection.annotated_photos[1] %}
                    {{ sorlimgtag(collection.annotated_photos[1], "256x100", crop="center", classes="collection") }}
                {% else %}
                    <img src="https://farm8.staticflickr.com/7634/16557874227_3ab8190bdd_b.jpg" class="collection">
                {% endif %}
            </div></div>
            <div class="secondary"><div class="inner">
                {% if collection.annotated_photos[2] %}
                    {{ sorlimgtag(collection.annotated_photos[2], "256x100", crop="center", classes="collection") }}
                {% else %}
                    <img src="https://farm8.staticflickr.com/7634/16557874227_3ab8190bdd_b.jpg" class="collection">
                {% endif %}
            </div></div>
            {% if loop.index is even %}{{ collection_primary(collection) }}{% endif %}
        </div>
        </a>
    {% endfor %}
  {% endmacro %}
