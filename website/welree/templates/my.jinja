{% extends "base.jinja" %}
{% import "macros.jinja" as macros %}
{% block extra_css %}
<style type="text/css">
  .my-header {
    text-align: bottom;
  }
  .my-header h1, .my-header a {
    display: inline-block;
  }
  .my-header h1.font-special {
    font-size: 3em;
  }
  .my-header a, .my-header a:hover, .my-header a:visited {
    font-size: 1.2em;
    font-weight: bold;
    color: #999 !important;
    margin-left: 20px;
    text-decoration: none;
  }
  .my-header a:hover, .my-header a.active {
    border-bottom: 7px solid #27bdbe;
  }
  #ideabooks .right {
    padding: 10px;
    background-color: #ccc;
  }
  .collection-description a {
    color: #27bdbe;
  }
  .col-md-12.slider {
    padding-right: 0px;
    overflow-x: scroll;
  }
</style>
{% endblock %}
{% block below_container %}
  <p class="text-error">{{ error_msg }}</p>
  <div class="my-header">
    <h1 class="font-special">My Welree</h1>
    <a href="#ideabooks" class="tab active">IdeaBooks</a>
    <a href="#styleme" class="tab">Style Me</a>
    <a href="#likes" class="tab">Likes</a>
    <a href="#community" class="tab">Community</a>
    <a href="#profile" class="tab">Profile</a>
  </div>
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="ideabooks">
      {% if collections %}
        <div class="row">
            <div class="col-md-12 slider">
                {{ macros.slider(collections, form_collection_new) }}
            </div>
        </div>
        <div class="row">
          <div class="col-md-7">
            {% for item in list(collection.items.all())*3 %}
              {{ sorlimgtag(item.primary_photo, "190x190", crop="center") }}
            {% endfor %}
          </div>
          <div class="col-md-5 right collection-description">
            <h1>{{ collection.name }}</h1>
            <p>{{ collection.description }}</p>
          </div>
        </div>
      {% else %}
        You don't currently have any collections. Create one!
      {% endif %}
    </div>
    <div role="tabpanel" class="tab-pane" id="styleme">Style Me</div>
    <div role="tabpanel" class="tab-pane" id="likes">
      Likes
    </div>
    <div role="tabpanel" class="tab-pane" id="community">
      <p>New collections from designers you follow will appear here</p>
      {{ macros.collection_rows(followingcollections) }}
    </div>
    <div role="tabpanel" class="tab-pane" id="profile">
        <div class="clearfix">
          <h4 class="pull-left">Update your profile:</h4>
          <a href="{{ request.user.get_absolute_url() }}" class="pull-right btn btn-primary">View profile</a>
        </div>
        <form method="POST" enctype="multipart/form-data" autocomplete="off">{% csrf_token %}
            <input style="display:none"><input type="password" style="display:none">
            {{ profile_form|as_bootstrap() }}
            <input type="submit" value="Update" class="btn btn-primary pull-right">
        </form>
    </div>
  </div>
{% endblock %}
{% block extra_js %}
<script>
  $(function() {
    $('.my-header a.tab').on('click', function(e) {
      e.preventDefault();
      $('.my-header a').removeClass('active');
      var target = $(this).addClass('active').attr('href');
      $('.tab-pane.active').stop(true, true).fadeOut(300, function() {
        $(this).removeClass('active');
        $(target).fadeIn(300).addClass('active');
      });
    });
  });
</script>
{% endblock %}
